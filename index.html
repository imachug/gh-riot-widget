<script>
    let handledIssues = {};
    async function update() {
        const res = await fetch("https://cors-anywhere.herokuapp.com/https://github.com/HelloZeroNet/ZeroNet/issues");
        const html = await res.text();
        html.replace(/<div id="issue_(\d+?)/g, (_, id) => {
            if(!handledIssues[id]) {
                handledIssues[id] = true;
                handleIssue(id);
            }
        });
    }
    
    function handleIssue(id) {
        const res = await fetch(`https://cors-anywhere.herokuapp.com/https://github.com/HelloZeroNet/ZeroNet/issues/${id}`);
        const html = await res.text();
        const startHtml = html.match(/<task-lists disabled sortable>(.*?)<\/task-lists>/)[1]
        const node = document.createElement("div");
        node.innerHTML = `<h1>#${id}</h1>${startHtml}`;
        node.className = "issue";
        document.querySelector(".issues").appendChild(node);
    }
  
    update();
    setInterval(update, 60 * 1000);
</script>
